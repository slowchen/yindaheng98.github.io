<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PersistentVolume和PersistentVolumeClaim - K8S持久卷的定义和使用 | Yin的笔记本</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    <meta name="description" content="Yin的笔记本">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/assets/css/0.styles.44dbe542.css" as="style"><link rel="preload" href="/assets/js/app.e19d4fe6.js" as="script"><link rel="preload" href="/assets/js/3.debbb74d.js" as="script"><link rel="preload" href="/assets/js/1.179f80cb.js" as="script"><link rel="preload" href="/assets/js/14.10790c6d.js" as="script"><link rel="prefetch" href="/assets/js/10.4e0a4d83.js"><link rel="prefetch" href="/assets/js/100.d70caf5e.js"><link rel="prefetch" href="/assets/js/101.1b15080a.js"><link rel="prefetch" href="/assets/js/102.2bb884f9.js"><link rel="prefetch" href="/assets/js/103.40026a29.js"><link rel="prefetch" href="/assets/js/104.5c29c312.js"><link rel="prefetch" href="/assets/js/105.ad2e27a4.js"><link rel="prefetch" href="/assets/js/106.35980356.js"><link rel="prefetch" href="/assets/js/107.f04f636a.js"><link rel="prefetch" href="/assets/js/108.e8f10f14.js"><link rel="prefetch" href="/assets/js/109.6c6a7109.js"><link rel="prefetch" href="/assets/js/11.8575be68.js"><link rel="prefetch" href="/assets/js/110.903e0099.js"><link rel="prefetch" href="/assets/js/111.1f2ad405.js"><link rel="prefetch" href="/assets/js/112.a7f8bd53.js"><link rel="prefetch" href="/assets/js/113.0dcf4261.js"><link rel="prefetch" href="/assets/js/114.810b8926.js"><link rel="prefetch" href="/assets/js/115.e80f0b84.js"><link rel="prefetch" href="/assets/js/116.5a49f413.js"><link rel="prefetch" href="/assets/js/117.f820355d.js"><link rel="prefetch" href="/assets/js/118.79b2ce39.js"><link rel="prefetch" href="/assets/js/119.8ca0cf37.js"><link rel="prefetch" href="/assets/js/12.5a62e5ff.js"><link rel="prefetch" href="/assets/js/120.d353f07a.js"><link rel="prefetch" href="/assets/js/121.7ffd75be.js"><link rel="prefetch" href="/assets/js/122.3eae46ea.js"><link rel="prefetch" href="/assets/js/123.35b1b0dd.js"><link rel="prefetch" href="/assets/js/124.fe7021f8.js"><link rel="prefetch" href="/assets/js/125.8e601c5a.js"><link rel="prefetch" href="/assets/js/126.4becec50.js"><link rel="prefetch" href="/assets/js/127.450e4c5f.js"><link rel="prefetch" href="/assets/js/128.20860d7b.js"><link rel="prefetch" href="/assets/js/13.24fe967d.js"><link rel="prefetch" href="/assets/js/15.684dfea1.js"><link rel="prefetch" href="/assets/js/16.153b910b.js"><link rel="prefetch" href="/assets/js/17.69054edc.js"><link rel="prefetch" href="/assets/js/18.edf7c78c.js"><link rel="prefetch" href="/assets/js/19.c9a80978.js"><link rel="prefetch" href="/assets/js/20.d35eeea9.js"><link rel="prefetch" href="/assets/js/21.bc1c75cf.js"><link rel="prefetch" href="/assets/js/22.f6a165cc.js"><link rel="prefetch" href="/assets/js/23.ce3b29a7.js"><link rel="prefetch" href="/assets/js/24.4ec9dda8.js"><link rel="prefetch" href="/assets/js/25.cd5f2e03.js"><link rel="prefetch" href="/assets/js/26.dc5fe5db.js"><link rel="prefetch" href="/assets/js/27.2183e0a4.js"><link rel="prefetch" href="/assets/js/28.7628b69e.js"><link rel="prefetch" href="/assets/js/29.2184b468.js"><link rel="prefetch" href="/assets/js/30.f09e1965.js"><link rel="prefetch" href="/assets/js/31.e9bdd017.js"><link rel="prefetch" href="/assets/js/32.0473f597.js"><link rel="prefetch" href="/assets/js/33.569c5020.js"><link rel="prefetch" href="/assets/js/34.27dd088d.js"><link rel="prefetch" href="/assets/js/35.fa1592da.js"><link rel="prefetch" href="/assets/js/36.d20818ef.js"><link rel="prefetch" href="/assets/js/37.66e08e27.js"><link rel="prefetch" href="/assets/js/38.c9e4f6f4.js"><link rel="prefetch" href="/assets/js/39.cfd07a77.js"><link rel="prefetch" href="/assets/js/4.55e064cc.js"><link rel="prefetch" href="/assets/js/40.9a896430.js"><link rel="prefetch" href="/assets/js/41.87dd1190.js"><link rel="prefetch" href="/assets/js/42.051a29fe.js"><link rel="prefetch" href="/assets/js/43.3e9ba0f4.js"><link rel="prefetch" href="/assets/js/44.c09cb5fe.js"><link rel="prefetch" href="/assets/js/45.ec6db11e.js"><link rel="prefetch" href="/assets/js/46.434753b1.js"><link rel="prefetch" href="/assets/js/47.cc7ef351.js"><link rel="prefetch" href="/assets/js/48.409fa972.js"><link rel="prefetch" href="/assets/js/49.3481fab8.js"><link rel="prefetch" href="/assets/js/5.363e7af8.js"><link rel="prefetch" href="/assets/js/50.c5e92485.js"><link rel="prefetch" href="/assets/js/51.f5c7a798.js"><link rel="prefetch" href="/assets/js/52.94c46c0b.js"><link rel="prefetch" href="/assets/js/53.a592b2d5.js"><link rel="prefetch" href="/assets/js/54.9f015bab.js"><link rel="prefetch" href="/assets/js/55.4c154572.js"><link rel="prefetch" href="/assets/js/56.76bb38c7.js"><link rel="prefetch" href="/assets/js/57.dccd47b9.js"><link rel="prefetch" href="/assets/js/58.d32f0ed1.js"><link rel="prefetch" href="/assets/js/59.e3f00e75.js"><link rel="prefetch" href="/assets/js/6.b62d3cb3.js"><link rel="prefetch" href="/assets/js/60.f07d388e.js"><link rel="prefetch" href="/assets/js/61.45e9a44a.js"><link rel="prefetch" href="/assets/js/62.fe9537f5.js"><link rel="prefetch" href="/assets/js/63.1f96f5b5.js"><link rel="prefetch" href="/assets/js/64.fbfe17d1.js"><link rel="prefetch" href="/assets/js/65.f934e7c4.js"><link rel="prefetch" href="/assets/js/66.e5276b59.js"><link rel="prefetch" href="/assets/js/67.b540afe6.js"><link rel="prefetch" href="/assets/js/68.d71c34bc.js"><link rel="prefetch" href="/assets/js/69.9cc07d69.js"><link rel="prefetch" href="/assets/js/7.6b18c1cb.js"><link rel="prefetch" href="/assets/js/70.26dc89c3.js"><link rel="prefetch" href="/assets/js/71.c1eabe2f.js"><link rel="prefetch" href="/assets/js/72.1d20b125.js"><link rel="prefetch" href="/assets/js/73.53e8f7e4.js"><link rel="prefetch" href="/assets/js/74.a3be9c65.js"><link rel="prefetch" href="/assets/js/75.d7e6134b.js"><link rel="prefetch" href="/assets/js/76.3f141945.js"><link rel="prefetch" href="/assets/js/77.bed5d40c.js"><link rel="prefetch" href="/assets/js/78.d009ab7c.js"><link rel="prefetch" href="/assets/js/79.c2f4627d.js"><link rel="prefetch" href="/assets/js/8.0d6fd39e.js"><link rel="prefetch" href="/assets/js/80.65875fa4.js"><link rel="prefetch" href="/assets/js/81.15d5d655.js"><link rel="prefetch" href="/assets/js/82.32705fd9.js"><link rel="prefetch" href="/assets/js/83.908e697c.js"><link rel="prefetch" href="/assets/js/84.cb3c2b13.js"><link rel="prefetch" href="/assets/js/85.93a4d929.js"><link rel="prefetch" href="/assets/js/86.7fb4ad19.js"><link rel="prefetch" href="/assets/js/87.8a7b13e4.js"><link rel="prefetch" href="/assets/js/88.89cbe933.js"><link rel="prefetch" href="/assets/js/89.0743144e.js"><link rel="prefetch" href="/assets/js/9.99b90750.js"><link rel="prefetch" href="/assets/js/90.306dfd8b.js"><link rel="prefetch" href="/assets/js/91.b480f1ea.js"><link rel="prefetch" href="/assets/js/92.499ba67c.js"><link rel="prefetch" href="/assets/js/93.e3d12aaa.js"><link rel="prefetch" href="/assets/js/94.397c025d.js"><link rel="prefetch" href="/assets/js/95.cb755aca.js"><link rel="prefetch" href="/assets/js/96.94cb3fc9.js"><link rel="prefetch" href="/assets/js/97.293d0e49.js"><link rel="prefetch" href="/assets/js/98.f1137a77.js"><link rel="prefetch" href="/assets/js/99.c345488b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.44dbe542.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-42dd5e05><div data-v-42dd5e05><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-42dd5e05 data-v-42dd5e05><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-95c9a4e8 data-v-42dd5e05 data-v-42dd5e05><h3 class="title" style="display:none;" data-v-95c9a4e8 data-v-95c9a4e8>Yin的笔记本</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-95c9a4e8 data-v-95c9a4e8><input type="password" value="" data-v-95c9a4e8> <span data-v-95c9a4e8>Konck! Knock!</span> <button data-v-95c9a4e8>OK</button></label> <div class="footer" style="display:none;" data-v-95c9a4e8 data-v-95c9a4e8><span data-v-95c9a4e8><i class="iconfont reco-theme" data-v-95c9a4e8></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-95c9a4e8>vuePress-theme-reco</a></span> <span data-v-95c9a4e8><i class="iconfont reco-copyright" data-v-95c9a4e8></i> <a data-v-95c9a4e8><span data-v-95c9a4e8>Howard Yin</span>
            
          <span data-v-95c9a4e8>2018 - </span>
          2020
        </a></span></div></div> <div class="hide" data-v-42dd5e05><header class="navbar" data-v-42dd5e05><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Yin的笔记本" class="logo"> <span class="site-name">Yin的笔记本</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Docker/" class="nav-link"><i class="iconfont undefined"></i>
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/categories/namespaces/" class="nav-link"><i class="iconfont undefined"></i>
  namespaces
</a></li><li class="dropdown-item"><!----> <a href="/categories/Kubernetes/" class="nav-link"><i class="iconfont undefined"></i>
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/categories/MyIdeas/" class="nav-link"><i class="iconfont undefined"></i>
  MyIdeas
</a></li><li class="dropdown-item"><!----> <a href="/categories/Revolution/" class="nav-link"><i class="iconfont undefined"></i>
  Revolution
</a></li><li class="dropdown-item"><!----> <a href="/categories/云计算/" class="nav-link"><i class="iconfont undefined"></i>
  云计算
</a></li><li class="dropdown-item"><!----> <a href="/categories/分布式/" class="nav-link"><i class="iconfont undefined"></i>
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/categories/应试/" class="nav-link"><i class="iconfont undefined"></i>
  应试
</a></li><li class="dropdown-item"><!----> <a href="/categories/校内推免面试/" class="nav-link"><i class="iconfont undefined"></i>
  校内推免面试
</a></li><li class="dropdown-item"><!----> <a href="/categories/微服务/" class="nav-link"><i class="iconfont undefined"></i>
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/categories/数学/" class="nav-link"><i class="iconfont undefined"></i>
  数学
</a></li><li class="dropdown-item"><!----> <a href="/categories/形式语言与自动机/" class="nav-link"><i class="iconfont undefined"></i>
  形式语言与自动机
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="iconfont undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/服务器运维/" class="nav-link"><i class="iconfont undefined"></i>
  服务器运维
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程语言/" class="nav-link"><i class="iconfont undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/categories/Go/" class="nav-link"><i class="iconfont undefined"></i>
  Go
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="iconfont undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/Node/" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/categories/Python/" class="nav-link"><i class="iconfont undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/categories/Shell/" class="nav-link"><i class="iconfont undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/categories/Tex/" class="nav-link"><i class="iconfont undefined"></i>
  Tex
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机网络/" class="nav-link"><i class="iconfont undefined"></i>
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/categories/翻译/" class="nav-link"><i class="iconfont undefined"></i>
  翻译
</a></li><li class="dropdown-item"><!----> <a href="/categories/论文笔记/" class="nav-link"><i class="iconfont undefined"></i>
  论文笔记
</a></li><li class="dropdown-item"><!----> <a href="/categories/边缘计算/" class="nav-link"><i class="iconfont undefined"></i>
  边缘计算
</a></li><li class="dropdown-item"><!----> <a href="/categories/量子信息技术/" class="nav-link"><i class="iconfont undefined"></i>
  量子信息技术
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yindaheng98" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.yindaheng98.top:30000/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-account"></i>
  Site
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/github.com/yindaheng98/yindaheng98.github.io" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-查看源码"></i>
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask" data-v-42dd5e05></div> <aside class="sidebar" data-v-42dd5e05><div class="personal-info-wrapper" data-v-0ac41e2e><img src="/avatar.svg" alt="author-avatar" class="personal-img" data-v-0ac41e2e> <h3 class="name" data-v-0ac41e2e>
    Howard Yin
  </h3> <div class="num" data-v-0ac41e2e><div data-v-0ac41e2e><h3 data-v-0ac41e2e>117</h3> <h6 data-v-0ac41e2e>Article</h6></div> <div data-v-0ac41e2e><h3 data-v-0ac41e2e>82</h3> <h6 data-v-0ac41e2e>Tag</h6></div></div> <hr data-v-0ac41e2e></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Docker/" class="nav-link"><i class="iconfont undefined"></i>
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/categories/namespaces/" class="nav-link"><i class="iconfont undefined"></i>
  namespaces
</a></li><li class="dropdown-item"><!----> <a href="/categories/Kubernetes/" class="nav-link"><i class="iconfont undefined"></i>
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/categories/MyIdeas/" class="nav-link"><i class="iconfont undefined"></i>
  MyIdeas
</a></li><li class="dropdown-item"><!----> <a href="/categories/Revolution/" class="nav-link"><i class="iconfont undefined"></i>
  Revolution
</a></li><li class="dropdown-item"><!----> <a href="/categories/云计算/" class="nav-link"><i class="iconfont undefined"></i>
  云计算
</a></li><li class="dropdown-item"><!----> <a href="/categories/分布式/" class="nav-link"><i class="iconfont undefined"></i>
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/categories/应试/" class="nav-link"><i class="iconfont undefined"></i>
  应试
</a></li><li class="dropdown-item"><!----> <a href="/categories/校内推免面试/" class="nav-link"><i class="iconfont undefined"></i>
  校内推免面试
</a></li><li class="dropdown-item"><!----> <a href="/categories/微服务/" class="nav-link"><i class="iconfont undefined"></i>
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/categories/数学/" class="nav-link"><i class="iconfont undefined"></i>
  数学
</a></li><li class="dropdown-item"><!----> <a href="/categories/形式语言与自动机/" class="nav-link"><i class="iconfont undefined"></i>
  形式语言与自动机
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="iconfont undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/服务器运维/" class="nav-link"><i class="iconfont undefined"></i>
  服务器运维
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程语言/" class="nav-link"><i class="iconfont undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/categories/Go/" class="nav-link"><i class="iconfont undefined"></i>
  Go
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="iconfont undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/Node/" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/categories/Python/" class="nav-link"><i class="iconfont undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/categories/Shell/" class="nav-link"><i class="iconfont undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/categories/Tex/" class="nav-link"><i class="iconfont undefined"></i>
  Tex
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机网络/" class="nav-link"><i class="iconfont undefined"></i>
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/categories/翻译/" class="nav-link"><i class="iconfont undefined"></i>
  翻译
</a></li><li class="dropdown-item"><!----> <a href="/categories/论文笔记/" class="nav-link"><i class="iconfont undefined"></i>
  论文笔记
</a></li><li class="dropdown-item"><!----> <a href="/categories/边缘计算/" class="nav-link"><i class="iconfont undefined"></i>
  边缘计算
</a></li><li class="dropdown-item"><!----> <a href="/categories/量子信息技术/" class="nav-link"><i class="iconfont undefined"></i>
  量子信息技术
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yindaheng98" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.yindaheng98.top:30000/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-account"></i>
  Site
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/github.com/yindaheng98/yindaheng98.github.io" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-查看源码"></i>
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>PersistentVolume和PersistentVolumeClaim - K8S持久卷的定义和使用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Kubernetes/PersistentVolume.html#persistentvolume和persistentvolumeclaim的正确使用方法" class="sidebar-link">PersistentVolume和PersistentVolumeClaim的正确使用方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Kubernetes/PersistentVolume.html#persistentvolume和persistentvolumeclaim的删除顺序" class="sidebar-link">PersistentVolume和PersistentVolumeClaim的删除顺序</a></li></ul></li><li><a href="/Kubernetes/PersistentVolume.html#persistentvolume" class="sidebar-link">PersistentVolume</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Kubernetes/PersistentVolume.html#pv的类型" class="sidebar-link">PV的类型</a></li><li class="sidebar-sub-header"><a href="/Kubernetes/PersistentVolume.html#capacity" class="sidebar-link">capacity</a></li><li class="sidebar-sub-header"><a href="/Kubernetes/PersistentVolume.html#volumemode" class="sidebar-link">volumeMode</a></li><li class="sidebar-sub-header"><a href="/Kubernetes/PersistentVolume.html#accessmodes" class="sidebar-link">accessModes</a></li><li class="sidebar-sub-header"><a href="/Kubernetes/PersistentVolume.html#persistentvolumereclaimpolicy" class="sidebar-link">persistentVolumeReclaimPolicy</a></li><li class="sidebar-sub-header"><a href="/Kubernetes/PersistentVolume.html#storageclassname" class="sidebar-link">storageClassName</a></li><li class="sidebar-sub-header"><a href="/Kubernetes/PersistentVolume.html#mountoptions" class="sidebar-link">mountOptions</a></li><li class="sidebar-sub-header"><a href="/Kubernetes/PersistentVolume.html#node-affinity" class="sidebar-link">Node Affinity</a></li></ul></li><li><a href="/Kubernetes/PersistentVolume.html#persistentvolumeclaim" class="sidebar-link">PersistentVolumeClaim</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Kubernetes/PersistentVolume.html#selector" class="sidebar-link">selector</a></li><li class="sidebar-sub-header"><a href="/Kubernetes/PersistentVolume.html#resources" class="sidebar-link">resources</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-95c9a4e8 data-v-42dd5e05><h3 class="title" style="display:none;" data-v-95c9a4e8 data-v-95c9a4e8>PersistentVolume和PersistentVolumeClaim - K8S持久卷的定义和使用</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-95c9a4e8 data-v-95c9a4e8><input type="password" value="" data-v-95c9a4e8> <span data-v-95c9a4e8>Konck! Knock!</span> <button data-v-95c9a4e8>OK</button></label> <div class="footer" style="display:none;" data-v-95c9a4e8 data-v-95c9a4e8><span data-v-95c9a4e8><i class="iconfont reco-theme" data-v-95c9a4e8></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-95c9a4e8>vuePress-theme-reco</a></span> <span data-v-95c9a4e8><i class="iconfont reco-copyright" data-v-95c9a4e8></i> <a data-v-95c9a4e8><span data-v-95c9a4e8>Howard Yin</span>
            
          <span data-v-95c9a4e8>2018 - </span>
          2020
        </a></span></div></div> <div data-v-42dd5e05><main class="page"><div class="page-title" style="display:none;"><h1>PersistentVolume和PersistentVolumeClaim - K8S持久卷的定义和使用</h1> <hr> <div data-v-3d9cec6e><i class="iconfont reco-account" data-v-3d9cec6e><span data-v-3d9cec6e>Howard Yin</span></i> <i class="iconfont reco-date" data-v-3d9cec6e><span data-v-3d9cec6e>2020-08-11 11:32:41</span></i> <!----> <i class="iconfont reco-tag tags" data-v-3d9cec6e><span class="tag-item" data-v-3d9cec6e>Kubernetes</span><span class="tag-item" data-v-3d9cec6e>概念</span><span class="tag-item" data-v-3d9cec6e>实操</span><span class="tag-item" data-v-3d9cec6e>存储</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><p>Kubernetes的pod本身是无状态的（stateless）,生命周期通常比较短，只要出现了异常，Kubernetes就会自动创建一个新的Pod来代替它。而容器产生的数据，会随着Pod消亡而自动消失。</p> <p>为了实现Pod内数据的存储管理，Kubernetes引入了两个API资源：Persistent Volume（持久卷，以下简称PV）和Persistent Volume Claim（持久卷申请，以下简称PVC）。</p> <p><strong>PV是Kubernetes集群中的一种网络存储实现</strong>，跟Node一样，也是属于集群的资源。</p> <p>PV跟Docker里的Volume(卷)类似，不过会有独立于Pod的生命周期；而<strong>PVC是用户的一个存储请求</strong>，跟Pod类似。Pod消费Node的资源，PVC消费PV的资源。</p> <table><thead><tr><th>Pod</th> <th>PVC</th></tr></thead> <tbody><tr><td>Pod消费Node的资源</td> <td>PVC消费PV的资源</td></tr> <tr><td>Pod 能够申请特定的资源（CPU和内存）</td> <td>PVC能够申请特定的尺寸和访问模式（只读、只写、可读写等），而无须感知这些实例背后具体的存储实现。</td></tr></tbody></table> <p><img src="/assets/img/PV-PVC.f6cdfbfb.png" alt="PV-PVC"></p> <h2 id="persistentvolume和persistentvolumeclaim的正确使用方法"><a href="#persistentvolume和persistentvolumeclaim的正确使用方法" class="header-anchor">#</a> PersistentVolume和PersistentVolumeClaim的正确使用方法</h2> <p>PersistentVolume应由集群管理员创建，而集群用户通过PersistentVolumeClaim使用管理员创建的PersistentVolume。用户不关心PersistentVolume的具体位置和具体实现，只管使用。</p> <ol><li>集群管理员创建由物理存储支持的 PersistentVolume。管理员不将卷与任何 Pod 关联。</li> <li>群集用户创建一个 PersistentVolumeClaim，它将自动绑定到合适的 PersistentVolume。</li> <li>用户创建使用 PersistentVolumeClaim 作为存储的 Pod。</li></ol> <h3 id="persistentvolume和persistentvolumeclaim的删除顺序"><a href="#persistentvolume和persistentvolumeclaim的删除顺序" class="header-anchor">#</a> PersistentVolume和PersistentVolumeClaim的删除顺序</h3> <p>显然，现有PersistentVolume后有PersistentVolumeClaim。在K8S中，PersistentVolume的删除命令<code>kubectl delete pv &lt;pv名&gt;</code>会阻塞直到与这个PV绑定的所有PVC被删除。</p> <h2 id="persistentvolume"><a href="#persistentvolume" class="header-anchor">#</a> PersistentVolume</h2> <p>不管三七二十一先放个示例：</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PersistentVolume
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> the<span class="token punctuation">-</span>pv
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">hostPath</span><span class="token punctuation">:</span> <span class="token comment">#这是个位于本地某个文件夹的PV</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/mnt/data&quot;</span> <span class="token comment">#文件夹的路径</span>
  <span class="token key atrule">capacity</span><span class="token punctuation">:</span> <span class="token comment">#存储容量</span>
    <span class="token key atrule">storage</span><span class="token punctuation">:</span> 5Gi <span class="token comment">#存储容量为5G</span>
  <span class="token key atrule">volumeMode</span><span class="token punctuation">:</span> Filesystem
  <span class="token key atrule">accessModes</span><span class="token punctuation">:</span> <span class="token comment">#访问模式</span>
    <span class="token punctuation">-</span> ReadWriteOnce <span class="token comment">#访问模式为只能由一个Pod以读写模式挂载</span>
  <span class="token key atrule">persistentVolumeReclaimPolicy</span><span class="token punctuation">:</span> Recycle
  <span class="token key atrule">storageClassName</span><span class="token punctuation">:</span> slow
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>下面来一个个介绍这里面的字段。</p> <h3 id="pv的类型"><a href="#pv的类型" class="header-anchor">#</a> PV的类型</h3> <p>上面这个PV <code>spec</code> 字段中的第一个<code>hostPath</code>表示这个PV是个位于本地某个文件夹中。除<code>hostPath</code>外，PV还支持以下类型：</p> <ul><li>GCEPersistentDisk</li> <li>AWSElasticBlockStore</li> <li>AzureFile</li> <li>AzureDisk</li> <li>CSI</li> <li>FC (Fibre Channel)</li> <li>FlexVolume</li> <li>Flocker</li> <li>NFS</li> <li>iSCSI</li> <li>RBD (Ceph Block Device)</li> <li>CephFS</li> <li>Cinder (OpenStack block storage)</li> <li>Glusterfs</li> <li>VsphereVolume</li> <li>Quobyte Volumes</li> <li>HostPath (Single node testing only -- local storage is not supported in any way and WILL NOT WORK in a multi-node cluster)</li> <li>Portworx Volumes</li> <li>ScaleIO Volumes</li> <li>StorageOS</li></ul> <p>这些类型的在PV中的定义和在Pod的Volumes里的定义都是一回事，具体介绍和各自的字段名可见<a href="/Kubernetes/Volume.html">《Volume - 挂载数据盘》</a>。</p> <h3 id="capacity"><a href="#capacity" class="header-anchor">#</a> <code>capacity</code></h3> <p>顾名思义，这是指这个PV的容量限制。它的单位有:<code>T</code>,<code>P</code>,<code>G</code>,<code>M</code>,<code>K</code>或 <code>Ti</code>,<code>Pi</code>,<code>Gi</code>,<code>Mi</code>,<code>Ki</code>，其中加i的是以1024为换算单位的。</p> <blockquote><p>For example, the following represent roughly the same value: 128974848, &quot;129e6&quot;, &quot;129M&quot; , &quot;123Mi&quot;.</p></blockquote> <h3 id="volumemode"><a href="#volumemode" class="header-anchor">#</a> <code>volumeMode</code></h3> <p><code>volumeMode</code>用于指定这个PV上要不要有文件系统。<code>volumeMode</code>有两种值：</p> <ul><li><code>Block</code>：PV上没有文件系统。这意味着PV挂载到容器中时是一个块设备，容器中的程序必须有处理块设备的能力才能正常使用这种PV</li> <li><code>Filesystem</code>：PV上有文件系统。PV挂载到容器中时是一个正常的挂载点，此为默认值。</li></ul> <h3 id="accessmodes"><a href="#accessmodes" class="header-anchor">#</a> <code>accessModes</code></h3> <p><code>accessModes</code>指定了这个PV可以提供的访问模式。它有以下三种值：</p> <ul><li><code>ReadWriteOnce</code> -- 只能被单个节点以读写模式挂载</li> <li><code>ReadOnlyMany</code> -- 只能由多个节点以只读模式挂载</li> <li><code>ReadWriteMany</code> -- 能由多个节点以读写模式挂载</li></ul> <p>但是并不是所有的网络文件系统都支持上面这些挂载方式，因此不同类型的PV也有所不同。各种PV各自支持的<code>accessModes</code>如表：</p> <table><thead><tr><th style="text-align:left;"></th> <th style="text-align:center;">ReadWriteOnce</th> <th style="text-align:center;">ReadOnlyMany</th> <th style="text-align:center;">ReadWriteMany</th></tr></thead> <tbody><tr><td style="text-align:left;">AWSElasticBlockStore</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td></tr> <tr><td style="text-align:left;">AzureFile</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td></tr> <tr><td style="text-align:left;">AzureDisk</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td></tr> <tr><td style="text-align:left;">CephFS</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td></tr> <tr><td style="text-align:left;">Cinder</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td></tr> <tr><td style="text-align:left;">CSI</td> <td style="text-align:center;">depends on the driver</td> <td style="text-align:center;">depends on the driver</td> <td style="text-align:center;">depends on the driver</td></tr> <tr><td style="text-align:left;">FC</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">-</td></tr> <tr><td style="text-align:left;">FlexVolume</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">depends on the driver</td></tr> <tr><td style="text-align:left;">Flocker</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td></tr> <tr><td style="text-align:left;">GCEPersistentDisk</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">-</td></tr> <tr><td style="text-align:left;">Glusterfs</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td></tr> <tr><td style="text-align:left;">HostPath</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td></tr> <tr><td style="text-align:left;">iSCSI</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">-</td></tr> <tr><td style="text-align:left;">Quobyte</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td></tr> <tr><td style="text-align:left;">NFS</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td></tr> <tr><td style="text-align:left;">RBD</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">-</td></tr> <tr><td style="text-align:left;">VsphereVolume</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">-</td> <td style="text-align:center;">- (works when Pods are collocated)</td></tr> <tr><td style="text-align:left;">PortworxVolume</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">-</td> <td style="text-align:center;">✓</td></tr> <tr><td style="text-align:left;">ScaleIO</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">-</td></tr> <tr><td style="text-align:left;">StorageOS</td> <td style="text-align:center;">✓</td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td></tr></tbody></table> <h3 id="persistentvolumereclaimpolicy"><a href="#persistentvolumereclaimpolicy" class="header-anchor">#</a> <code>persistentVolumeReclaimPolicy</code></h3> <p>若Pod绑定了一个PVC，PVC绑定了一个PV，后来Pod删除了，那么PV中的数据要怎么处理？</p> <ul><li><code>Retain</code> -- 默认回收策略，即这些数据保留着，以便Pod再次创建时还能使用</li> <li><code>Recycle</code> -- 清空里面的数据，允许其他Pod绑定使用</li> <li><code>Delete</code> -- 不仅清空里面的数据，还把PV直接一起删了</li></ul> <h3 id="storageclassname"><a href="#storageclassname" class="header-anchor">#</a> <code>storageClassName</code></h3> <blockquote><p>StorageClass 为管理员提供了描述存储 &quot;类&quot; 的方法。 不同的类型可能会映射到不同的服务质量等级或备份策略，或是由集群管理员制定的任意策略。 Kubernetes 本身并不清楚各种类代表的什么。这个类的概念在其他存储系统中有时被称为 &quot;配置文件&quot;。</p></blockquote> <p>对 StorageClass 的具体介绍可见<a href="https://github.com/kubernetes/website/blob/release-1.17/content/zh/docs/concepts/storage/storage-classes.md" target="_blank" rel="noopener noreferrer">《存储类》<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p>A PV with no storageClassName has no class and can only be bound to PVCs that request no particular class.</p></blockquote> <h3 id="mountoptions"><a href="#mountoptions" class="header-anchor">#</a> <code>mountOptions</code></h3> <p><code>mountOptions</code>是针对不同类型PV的额外配置。目前有额外配置的类型有：</p> <ul><li>AWSElasticBlockStore</li> <li>AzureDisk</li> <li>AzureFile</li> <li>CephFS</li> <li>Cinder (OpenStack block storage)</li> <li>GCEPersistentDisk</li> <li>Glusterfs</li> <li>NFS</li> <li>Quobyte Volumes</li> <li>RBD (Ceph Block Device)</li> <li>StorageOS</li> <li>VsphereVolume</li> <li>iSCSI</li></ul> <h3 id="node-affinity"><a href="#node-affinity" class="header-anchor">#</a> Node Affinity</h3> <blockquote><blockquote><p>Note: For most volume types, you do not need to set this field. It is automatically populated for AWS EBS, GCE PD and Azure Disk volume block types. You need to explicitly set this for local volumes.</p></blockquote> <p>A PV can specify node affinity to define constraints that limit what nodes this volume can be accessed from. Pods that use a PV will only be scheduled to nodes that are selected by the node affinity.</p></blockquote> <h2 id="persistentvolumeclaim"><a href="#persistentvolumeclaim" class="header-anchor">#</a> PersistentVolumeClaim</h2> <p>不管三七二十一先放个示例：</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PersistentVolumeClaim
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myclaim
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">accessModes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ReadWriteOnce
  <span class="token key atrule">volumeMode</span><span class="token punctuation">:</span> Filesystem
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">requests</span><span class="token punctuation">:</span>
      <span class="token key atrule">storage</span><span class="token punctuation">:</span> 8Gi
  <span class="token key atrule">storageClassName</span><span class="token punctuation">:</span> slow
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">release</span><span class="token punctuation">:</span> stable
    <span class="token key atrule">matchExpressions</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">key</span><span class="token punctuation">:</span> environment
        <span class="token key atrule">operator</span><span class="token punctuation">:</span> In
        <span class="token key atrule">values</span><span class="token punctuation">:</span> 
          <span class="token punctuation">-</span> dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><p>创建 PersistentVolumeClaim 之后，Kubernetes 控制平面将查找满足申领要求的 PersistentVolume。 如果控制平面找到具有相同 StorageClass 的适当的 PersistentVolume，则将 PersistentVolumeClaim 绑定到该 PersistentVolume 上。</p></blockquote> <p>和上面的PV定义对比一下就可以发现，定义PVC的字段和定义PV的字段基本相同。不同的是，PV中的<code>accessModes</code>、<code>volumeMode</code>、<code>storageClassName</code>是定义了PV的性质，而PVC中的这些字段是用来查找合适的PV进行绑定。</p> <p>除了<code>accessModes</code>、<code>volumeMode</code>、<code>storageClassName</code>外，还有一个用于查询PV标签的<code>selector</code>和资源请求的<code>resources</code>。</p> <h3 id="selector"><a href="#selector" class="header-anchor">#</a> <code>selector</code></h3> <p><code>selector</code>字段用于指定要绑定的PV的标签，只有标签全部匹配到的PV才能绑定。</p> <p>其中的<code>matchLabels</code>和<code>matchExpressions</code>都是标签的匹配规则。</p> <p>一看就懂，不说了。不懂的对比一下<a href="/Kubernetes/Pod亲和性调度.html">《Pod的亲和性调度》</a>里面的标签匹配规则也就差不多了。</p> <h3 id="resources"><a href="#resources" class="header-anchor">#</a> <code>resources</code></h3> <p><code>resources</code>字段用于指定PVC需要的资源量，比如上面那个<code>.spec.resources.requests.storage</code>表示这个PVC绑定的PV至少要有7G。</p></div> <footer class="page-edit" style="display:none;"><div class="edit-link"><a href="https://github.com/github.com/yindaheng98/My-docs/edit/master/学习笔记/Kubernetes/PersistentVolume.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">创建于: </span> <span class="time">2020-08-09T03:24:40.000Z</span></div> <br> <div class="last-updated"><span class="prefix">更新于: </span> <span class="time">2020-08-11T11:32:41.000Z</span></div></footer> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-44bd5a18 data-v-44bd5a18><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-44bd5a18><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-44bd5a18></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-44bd5a18></path></svg></div></div></div>
    <script src="/assets/js/app.e19d4fe6.js" defer></script><script src="/assets/js/3.debbb74d.js" defer></script><script src="/assets/js/1.179f80cb.js" defer></script><script src="/assets/js/14.10790c6d.js" defer></script>
  </body>
</html>
